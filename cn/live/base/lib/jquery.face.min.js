!function(t){t.fn.qqFace=function(i){var e={id:"facebox",path:"face/",assign:"content",zIndex:1e3,tip:""},n=t.extend(e,i),a=t("#"+n.assign),r=n.id,s=n.path,c=n.tip;return a.length<=0?(alert("缺少表情赋值对象。"),!1):void t(this).click(function(i){var e,a;if(t("#"+r).length<=0){if(e='<div id="'+r+'" class="facebox"><i class="arr"></i><div class="facecont">',e+='<table border="0" cellspacing="0" cellpadding="0"><tr>',navigator.userAgent&&/(iphone|ipod|ipad|android)/.test(navigator.userAgent.toLowerCase()))for(var d=1;45>=d;d++)a=s+c+d+".gif",e+='<td><img src="'+s+d+'.gif" tsg="'+n.assign+'" lf="'+a+'"/></td>',d%9==0&&(e+="</tr><tr>");else for(var d=1;75>=d;d++)a=s+c+d+".gif",e+='<td><img src="'+s+d+'.gif" tsg="'+n.assign+'" lf="'+a+'"/></td>',d%15==0&&(e+="</tr><tr>");e+="</tr></table></div></div>",t(this).parent().append(e),t(this).parent().find("img").click(function(){t("#"+t(this).attr("tsg")).insertAtCaret(t(this).attr("lf")),t(this).parents(".facebox").hide()})}else t("#"+r+":visible").length>0?t("#"+r).hide():t("#"+r).show();i.stopPropagation()})}}(jQuery),jQuery.fn.extend({insertAtCaret:function(t){t='<img src="'+t+'"/>';var i=$(this).get(0);i.innerHTML+=t,$(this).focusEnd()}});